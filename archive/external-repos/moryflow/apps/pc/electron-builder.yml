appId: com.moryflow.app
productName: MoryFlow
directories:
  output: release/${version}
files:
  - dist/**/*
  - package.json
  - node_modules/**/*

# 发布配置 - 生成 latest.yml 用于自动更新
publish:
  - provider: github
    owner: dvlin-dev
    repo: moryflow
    releaseType: release
  # Cloudflare R2 作为国内镜像（手动上传，此处仅用于 latest.yml 生成）
  - provider: generic
    url: https://download.moryflow.com/${version}
mac:
  icon: build/icon.icns
  # DMG 文件名带版本，但应用名不带版本
  artifactName: ${productName}-${version}-${arch}.${ext}
  target:
    - target: dmg
      arch:
        - arm64
  category: public.app-category.productivity
  hardenedRuntime: false
  gatekeeperAssess: false
  # Deep Link 协议关联
  extendInfo:
    CFBundleURLTypes:
      - CFBundleURLName: MoryFlow URL
        CFBundleURLSchemes:
          - moryflow
dmg:
  # 渐变背景图
  background: build/dmg-background.png
  # 安装界面标题不显示版本
  title: ${productName}
  # 图标大小
  iconSize: 100
  # 图标位置（参考 Dia 风格）
  contents:
    - x: 160
      y: 200
    - x: 500
      y: 200
      type: link
      path: /Applications
  window:
    width: 660
    height: 400
win:
  icon: build/icon.ico
  target:
    - nsis
  # Deep Link 协议关联
  protocols:
    - name: MoryFlow URL
      schemes:
        - moryflow
nsis:
  oneClick: false
  allowToChangeInstallationDirectory: true
  deleteAppDataOnUninstall: true
linux:
  target:
    - AppImage
  category: Utility
